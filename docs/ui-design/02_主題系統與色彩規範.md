# BandPro ä¸»é¡Œç³»çµ±èˆ‡è‰²å½©è¦ç¯„

æ·±æ·ºè‰²æ¨¡å¼å®Œæ•´å¯¦ç¾æ–¹æ¡ˆèˆ‡è¦–è¦ºæŒ‡å°åŸå‰‡

## ğŸŒ“ ä¸»é¡Œç³»çµ±æ¶æ§‹

### ä¸»é¡Œåˆ‡æ›æ©Ÿåˆ¶
```mermaid
flowchart TD
    subgraph ThemeDetection[ä¸»é¡Œåµæ¸¬]
        SystemPreference[ç³»çµ±åå¥½åµæ¸¬<br/>prefers-color-scheme]
        UserPreference[ç”¨æˆ¶æ‰‹å‹•é¸æ“‡<br/>localStorageå­˜å„²]
        DefaultTheme[é è¨­ä¸»é¡Œ<br/>è·Ÿéš¨ç³»çµ±]
    end
    
    subgraph ThemeState[ä¸»é¡Œç‹€æ…‹ç®¡ç†]
        VueReactivity[VueéŸ¿æ‡‰å¼ç‹€æ…‹<br/>theme.value]
        CSSVariables[CSSè‡ªè¨‚å±¬æ€§<br/>--color-*]
        HTMLAttribute[HTMLå±¬æ€§<br/>data-theme="dark"]
    end
    
    subgraph ThemeApplication[ä¸»é¡Œæ‡‰ç”¨]
        ComponentStyles[çµ„ä»¶æ¨£å¼æ›´æ–°<br/>è‡ªå‹•åˆ‡æ›]
        AnimatedTransition[å¹³æ»‘éæ¸¡å‹•ç•«<br/>200ms transition]
        PersistentStorage[æŒä¹…åŒ–å„²å­˜<br/>ä¸‹æ¬¡è¨ªå•è¨˜ä½]
    end
    
    SystemPreference --> VueReactivity
    UserPreference --> VueReactivity
    DefaultTheme --> VueReactivity
    
    VueReactivity --> CSSVariables
    VueReactivity --> HTMLAttribute
    
    CSSVariables --> ComponentStyles
    HTMLAttribute --> AnimatedTransition
    ComponentStyles --> PersistentStorage
```

### TypeScript ä¸»é¡Œé¡å‹å®šç¾©
```typescript
// types/theme.ts
export type ThemeMode = 'light' | 'dark' | 'auto'

export interface ThemeColors {
  // èƒŒæ™¯è‰²å½©
  background: {
    primary: string
    secondary: string
    tertiary: string
    elevated: string
  }
  
  // è¡¨é¢è‰²å½©
  surface: {
    primary: string
    secondary: string
    tertiary: string
  }
  
  // æ–‡å­—è‰²å½©
  text: {
    primary: string
    secondary: string
    tertiary: string
    inverse: string
  }
  
  // é‚Šæ¡†è‰²å½©
  border: {
    primary: string
    secondary: string
    focus: string
  }
  
  // å“ç‰Œè‰²å½©
  brand: {
    primary: string
    secondary: string
  }
  
  // èªç¾©è‰²å½©
  semantic: {
    success: string
    warning: string
    error: string
    info: string
  }
}

export interface ThemeConfig {
  mode: ThemeMode
  colors: ThemeColors
  typography: TypographyConfig
  spacing: SpacingConfig
  shadows: ShadowConfig
}
```

---

## ğŸ¨ è‰²å½©è¦ç¯„è©³è§£

### æ·ºè‰²æ¨¡å¼è‰²å½©ç³»çµ±
```mermaid
flowchart LR
    subgraph LightPalette[æ·ºè‰²æ¨¡å¼èª¿è‰²ç›¤]
        subgraph Backgrounds[èƒŒæ™¯è‰²éš]
            LBG1[#FFFFFF<br/>ç´”ç™½èƒŒæ™¯<br/>ä¸»è¦å…§å®¹å€]
            LBG2[#F8FAFC<br/>æ·ºç°èƒŒæ™¯<br/>æ¬¡è¦å€åŸŸ]
            LBG3[#F1F5F9<br/>æ›´æ·±èƒŒæ™¯<br/>åˆ†éš”å€åŸŸ]
            LBG4[#E2E8F0<br/>é‚Šæ¡†èƒŒæ™¯<br/>ç¦ç”¨ç‹€æ…‹]
        end
        
        subgraph TextColors[æ–‡å­—è‰²éš]
            LTX1[#0F172A<br/>ä¸»è¦æ–‡å­—<br/>æ¨™é¡Œå…§å®¹]
            LTX2[#475569<br/>æ¬¡è¦æ–‡å­—<br/>èªªæ˜æ–‡å­—]
            LTX3[#94A3B8<br/>è¼”åŠ©æ–‡å­—<br/>å ä½ç¬¦]
            LTX4[#CBD5E1<br/>ç¦ç”¨æ–‡å­—<br/>ä¸å¯ç”¨]
        end
        
        subgraph AccentColors[å¼·èª¿è‰²éš]
            LAC1[#3B82F6<br/>ä¸»è¦è—è‰²<br/>å“ç‰Œè‰²]
            LAC2[#10B981<br/>æˆåŠŸç¶ è‰²<br/>æ­£é¢å›é¥‹]
            LAC3[#F59E0B<br/>è­¦å‘Šæ©™è‰²<br/>æ³¨æ„äº‹é …]
            LAC4[#EF4444<br/>éŒ¯èª¤ç´…è‰²<br/>å±éšªæ“ä½œ]
        end
    end
```

#### æ·ºè‰²æ¨¡å¼ CSS è®Šæ•¸
```css
:root,
[data-theme="light"] {
  /* èƒŒæ™¯è‰²å½© */
  --bg-primary: #FFFFFF;
  --bg-secondary: #F8FAFC;
  --bg-tertiary: #F1F5F9;
  --bg-elevated: #FFFFFF;
  --bg-overlay: rgba(0, 0, 0, 0.1);
  
  /* è¡¨é¢è‰²å½© */
  --surface-primary: #FFFFFF;
  --surface-secondary: #F8FAFC;
  --surface-tertiary: #E2E8F0;
  --surface-hover: #F1F5F9;
  --surface-pressed: #E2E8F0;
  
  /* æ–‡å­—è‰²å½© */
  --text-primary: #0F172A;
  --text-secondary: #475569;
  --text-tertiary: #94A3B8;
  --text-disabled: #CBD5E1;
  --text-inverse: #FFFFFF;
  --text-link: #3B82F6;
  --text-link-hover: #2563EB;
  
  /* é‚Šæ¡†è‰²å½© */
  --border-primary: #E2E8F0;
  --border-secondary: #CBD5E1;
  --border-tertiary: #94A3B8;
  --border-focus: #3B82F6;
  --border-error: #EF4444;
  --border-success: #10B981;
  
  /* å“ç‰Œè‰²å½© */
  --brand-primary: #3B82F6;
  --brand-primary-hover: #2563EB;
  --brand-primary-pressed: #1D4ED8;
  --brand-secondary: #10B981;
  --brand-secondary-hover: #059669;
  --brand-secondary-pressed: #047857;
  
  /* èªç¾©è‰²å½© */
  --success: #10B981;
  --success-bg: #ECFDF5;
  --success-border: #A7F3D0;
  --warning: #F59E0B;
  --warning-bg: #FFFBEB;
  --warning-border: #FED7AA;
  --error: #EF4444;
  --error-bg: #FEF2F2;
  --error-border: #FECACA;
  --info: #3B82F6;
  --info-bg: #EFF6FF;
  --info-border: #BFDBFE;
  
  /* é™°å½±ç³»çµ± */
  --shadow-xs: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
  --shadow-2xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
}
```

### æ·±è‰²æ¨¡å¼è‰²å½©ç³»çµ±
```mermaid
flowchart LR
    subgraph DarkPalette[æ·±è‰²æ¨¡å¼èª¿è‰²ç›¤]
        subgraph Backgrounds[èƒŒæ™¯è‰²éš]
            DBG1[#0F172A<br/>æ·±è—èƒŒæ™¯<br/>ä¸»è¦å…§å®¹å€]
            DBG2[#1E293B<br/>ä¸­ç­‰èƒŒæ™¯<br/>æ¬¡è¦å€åŸŸ]
            DBG3[#334155<br/>è¼ƒäº®èƒŒæ™¯<br/>åˆ†éš”å€åŸŸ]
            DBG4[#475569<br/>é‚Šæ¡†èƒŒæ™¯<br/>ç¦ç”¨ç‹€æ…‹]
        end
        
        subgraph TextColors[æ–‡å­—è‰²éš]
            DTX1[#F8FAFC<br/>ä¸»è¦æ–‡å­—<br/>æ¨™é¡Œå…§å®¹]
            DTX2[#CBD5E1<br/>æ¬¡è¦æ–‡å­—<br/>èªªæ˜æ–‡å­—]
            DTX3[#94A3B8<br/>è¼”åŠ©æ–‡å­—<br/>å ä½ç¬¦]
            DTX4[#64748B<br/>ç¦ç”¨æ–‡å­—<br/>ä¸å¯ç”¨]
        end
        
        subgraph AccentColors[å¼·èª¿è‰²éš]
            DAC1[#60A5FA<br/>ä¸»è¦è—è‰²<br/>å“ç‰Œè‰²]
            DAC2[#34D399<br/>æˆåŠŸç¶ è‰²<br/>æ­£é¢å›é¥‹]
            DAC3[#FBBF24<br/>è­¦å‘Šæ©™è‰²<br/>æ³¨æ„äº‹é …]
            DAC4[#F87171<br/>éŒ¯èª¤ç´…è‰²<br/>å±éšªæ“ä½œ]
        end
    end
```

#### æ·±è‰²æ¨¡å¼ CSS è®Šæ•¸
```css
[data-theme="dark"] {
  /* èƒŒæ™¯è‰²å½© */
  --bg-primary: #0F172A;
  --bg-secondary: #1E293B;
  --bg-tertiary: #334155;
  --bg-elevated: #1E293B;
  --bg-overlay: rgba(0, 0, 0, 0.5);
  
  /* è¡¨é¢è‰²å½© */
  --surface-primary: #1E293B;
  --surface-secondary: #334155;
  --surface-tertiary: #475569;
  --surface-hover: #334155;
  --surface-pressed: #475569;
  
  /* æ–‡å­—è‰²å½© */
  --text-primary: #F8FAFC;
  --text-secondary: #CBD5E1;
  --text-tertiary: #94A3B8;
  --text-disabled: #64748B;
  --text-inverse: #0F172A;
  --text-link: #60A5FA;
  --text-link-hover: #3B82F6;
  
  /* é‚Šæ¡†è‰²å½© */
  --border-primary: #475569;
  --border-secondary: #64748B;
  --border-tertiary: #94A3B8;
  --border-focus: #60A5FA;
  --border-error: #F87171;
  --border-success: #34D399;
  
  /* å“ç‰Œè‰²å½© */
  --brand-primary: #60A5FA;
  --brand-primary-hover: #3B82F6;
  --brand-primary-pressed: #2563EB;
  --brand-secondary: #34D399;
  --brand-secondary-hover: #10B981;
  --brand-secondary-pressed: #059669;
  
  /* èªç¾©è‰²å½© */
  --success: #34D399;
  --success-bg: #022C22;
  --success-border: #064E3B;
  --warning: #FBBF24;
  --warning-bg: #451A03;
  --warning-border: #92400E;
  --error: #F87171;
  --error-bg: #450A0A;
  --error-border: #991B1B;
  --info: #60A5FA;
  --info-bg: #172554;
  --info-border: #1E40AF;
  
  /* é™°å½±ç³»çµ± - æ·±è‰²æ¨¡å¼éœ€è¦æ›´å¼·çš„é™°å½± */
  --shadow-xs: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
  --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.4), 0 1px 2px -1px rgba(0, 0, 0, 0.4);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4), 0 2px 4px -2px rgba(0, 0, 0, 0.4);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.4), 0 4px 6px -4px rgba(0, 0, 0, 0.4);
  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.4), 0 8px 10px -6px rgba(0, 0, 0, 0.4);
  --shadow-2xl: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
}
```

---

## ğŸ¼ éŸ³æ¨‚å°ˆç”¨è‰²å½©

### æ¨‚è­œå…ƒç´ è‰²å½©
```mermaid
flowchart TD
    subgraph MusicColors[éŸ³æ¨‚å…ƒç´ è‰²å½©]
        subgraph StaffElements[äº”ç·šè­œå…ƒç´ ]
            StaffLines[è­œç·šé¡è‰²<br/>æ·ºè‰²: #64748B<br/>æ·±è‰²: #94A3B8]
            Clefs[è­œè™Ÿé¡è‰²<br/>æ·ºè‰²: #1F2937<br/>æ·±è‰²: #F9FAFB]
            KeySig[èª¿è™Ÿé¡è‰²<br/>æ·ºè‰²: #374151<br/>æ·±è‰²: #E5E7EB]
            TimeSig[æ‹è™Ÿé¡è‰²<br/>æ·ºè‰²: #374151<br/>æ·±è‰²: #E5E7EB]
        end
        
        subgraph NoteColors[éŸ³ç¬¦è‰²å½©]
            SelectedNote[é¸ä¸­éŸ³ç¬¦<br/>æ·ºè‰²: #3B82F6<br/>æ·±è‰²: #60A5FA]
            HoverNote[æ‡¸åœéŸ³ç¬¦<br/>æ·ºè‰²: #93C5FD<br/>æ·±è‰²: #93C5FD]
            PlayingNote[æ’­æ”¾éŸ³ç¬¦<br/>æ·ºè‰²: #10B981<br/>æ·±è‰²: #34D399]
            ErrorNote[éŒ¯èª¤éŸ³ç¬¦<br/>æ·ºè‰²: #EF4444<br/>æ·±è‰²: #F87171]
        end
        
        subgraph CollabColors[å”ä½œè‰²å½©]
            User1[ç”¨æˆ¶1æ¸¸æ¨™<br/>#3B82F6 è—è‰²]
            User2[ç”¨æˆ¶2æ¸¸æ¨™<br/>#10B981 ç¶ è‰²]
            User3[ç”¨æˆ¶3æ¸¸æ¨™<br/>#F59E0B æ©™è‰²]
            User4[ç”¨æˆ¶4æ¸¸æ¨™<br/>#EF4444 ç´…è‰²]
            User5[ç”¨æˆ¶5æ¸¸æ¨™<br/>#8B5CF6 ç´«è‰²]
        end
    end
    
    StaffLines --> SelectedNote
    Clefs --> HoverNote
    KeySig --> PlayingNote
    TimeSig --> ErrorNote
    
    SelectedNote --> User1
    HoverNote --> User2
    PlayingNote --> User3
    ErrorNote --> User4
    User4 --> User5
```

#### éŸ³æ¨‚è‰²å½© CSS è®Šæ•¸
```css
/* æ·ºè‰²æ¨¡å¼éŸ³æ¨‚è‰²å½© */
[data-theme="light"] {
  /* æ¨‚è­œåŸºç¤å…ƒç´  */
  --music-staff-lines: #64748B;
  --music-clef: #1F2937;
  --music-key-signature: #374151;
  --music-time-signature: #374151;
  --music-measure-lines: #94A3B8;
  
  /* éŸ³ç¬¦ç‹€æ…‹è‰²å½© */
  --music-note-default: #1F2937;
  --music-note-selected: #3B82F6;
  --music-note-hover: #93C5FD;
  --music-note-playing: #10B981;
  --music-note-error: #EF4444;
  --music-note-disabled: #CBD5E1;
  
  /* å”ä½œç”¨æˆ¶è‰²å½© */
  --collab-user-1: #3B82F6;
  --collab-user-2: #10B981;
  --collab-user-3: #F59E0B;
  --collab-user-4: #EF4444;
  --collab-user-5: #8B5CF6;
  --collab-user-6: #EC4899;
  --collab-user-7: #14B8A6;
  --collab-user-8: #F97316;
}

/* æ·±è‰²æ¨¡å¼éŸ³æ¨‚è‰²å½© */
[data-theme="dark"] {
  /* æ¨‚è­œåŸºç¤å…ƒç´  */
  --music-staff-lines: #94A3B8;
  --music-clef: #F9FAFB;
  --music-key-signature: #E5E7EB;
  --music-time-signature: #E5E7EB;
  --music-measure-lines: #64748B;
  
  /* éŸ³ç¬¦ç‹€æ…‹è‰²å½© */
  --music-note-default: #F9FAFB;
  --music-note-selected: #60A5FA;
  --music-note-hover: #93C5FD;
  --music-note-playing: #34D399;
  --music-note-error: #F87171;
  --music-note-disabled: #64748B;
  
  /* å”ä½œç”¨æˆ¶è‰²å½© - æ·±è‰²æ¨¡å¼ä½¿ç”¨ç›¸åŒè‰²å½©ä½†é€æ˜åº¦èª¿æ•´ */
  --collab-user-1: #60A5FA;
  --collab-user-2: #34D399;
  --collab-user-3: #FBBF24;
  --collab-user-4: #F87171;
  --collab-user-5: #A78BFA;
  --collab-user-6: #F472B6;
  --collab-user-7: #2DD4BF;
  --collab-user-8: #FB923C;
}
```

---

## ğŸ›ï¸ ä¸»é¡Œåˆ‡æ›å¯¦ç¾

### Vue 3 Composition API å¯¦ç¾
```typescript
// composables/useTheme.ts
import { ref, computed, watch, onMounted } from 'vue'

type ThemeMode = 'light' | 'dark' | 'auto'

export const useTheme = () => {
  const themeMode = ref<ThemeMode>('auto')
  const systemTheme = ref<'light' | 'dark'>('light')
  
  // è¨ˆç®—ç•¶å‰å¯¦éš›ä¸»é¡Œ
  const currentTheme = computed(() => {
    if (themeMode.value === 'auto') {
      return systemTheme.value
    }
    return themeMode.value === 'dark' ? 'dark' : 'light'
  })
  
  // ç›£è½ç³»çµ±ä¸»é¡Œè®ŠåŒ–
  const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)')
  
  const updateSystemTheme = () => {
    systemTheme.value = mediaQuery.matches ? 'dark' : 'light'
  }
  
  // æ‡‰ç”¨ä¸»é¡Œåˆ° DOM
  const applyTheme = (theme: 'light' | 'dark') => {
    const root = document.documentElement
    root.setAttribute('data-theme', theme)
    
    // æ·»åŠ éæ¸¡æ•ˆæœ
    root.style.transition = 'background-color 0.2s ease, color 0.2s ease'
    
    // ç§»é™¤éæ¸¡æ•ˆæœï¼ˆé¿å…å½±éŸ¿å…¶ä»–å‹•ç•«ï¼‰
    setTimeout(() => {
      root.style.transition = ''
    }, 200)
  }
  
  // åˆ‡æ›ä¸»é¡Œ
  const setTheme = (mode: ThemeMode) => {
    themeMode.value = mode
    localStorage.setItem('theme-preference', mode)
  }
  
  // åˆå§‹åŒ–ä¸»é¡Œ
  const initTheme = () => {
    // å¾ localStorage è®€å–ç”¨æˆ¶åå¥½
    const stored = localStorage.getItem('theme-preference') as ThemeMode
    if (stored && ['light', 'dark', 'auto'].includes(stored)) {
      themeMode.value = stored
    }
    
    // æ›´æ–°ç³»çµ±ä¸»é¡Œ
    updateSystemTheme()
    
    // ç›£è½ç³»çµ±ä¸»é¡Œè®ŠåŒ–
    mediaQuery.addEventListener('change', updateSystemTheme)
  }
  
  // ç›£è½ä¸»é¡Œè®ŠåŒ–ä¸¦æ‡‰ç”¨
  watch(currentTheme, (theme) => {
    applyTheme(theme)
  }, { immediate: true })
  
  onMounted(() => {
    initTheme()
  })
  
  return {
    themeMode,
    currentTheme,
    setTheme,
    toggleTheme: () => {
      const nextTheme = currentTheme.value === 'light' ? 'dark' : 'light'
      setTheme(nextTheme)
    }
  }
}
```

### ä¸»é¡Œåˆ‡æ›æŒ‰éˆ•çµ„ä»¶
```vue
<!-- components/ThemeToggle.vue -->
<template>
  <button
    @click="toggleTheme"
    class="theme-toggle"
    :aria-label="`åˆ‡æ›åˆ°${nextThemeLabel}æ¨¡å¼`"
    type="button"
  >
    <Transition name="theme-icon" mode="out-in">
      <SunIcon
        v-if="currentTheme === 'dark'"
        key="sun"
        class="w-5 h-5"
      />
      <MoonIcon
        v-else
        key="moon"
        class="w-5 h-5"
      />
    </Transition>
    
    <!-- å¯é¸çš„æ–‡å­—æ¨™ç±¤ -->
    <span v-if="showLabel" class="ml-2 text-sm font-medium">
      {{ nextThemeLabel }}
    </span>
  </button>
</template>

<script setup lang="ts">
import { computed } from 'vue'
import { SunIcon, MoonIcon } from '@heroicons/vue/24/outline'
import { useTheme } from '@/composables/useTheme'

interface Props {
  showLabel?: boolean
}

withDefaults(defineProps<Props>(), {
  showLabel: false
})

const { currentTheme, toggleTheme } = useTheme()

const nextThemeLabel = computed(() => {
  return currentTheme.value === 'light' ? 'æ·±è‰²' : 'æ·ºè‰²'
})
</script>

<style scoped>
.theme-toggle {
  @apply inline-flex items-center justify-center;
  @apply w-10 h-10 rounded-lg;
  @apply text-gray-500 hover:text-gray-900;
  @apply bg-gray-100 hover:bg-gray-200;
  @apply dark:text-gray-400 dark:hover:text-gray-100;
  @apply dark:bg-gray-800 dark:hover:bg-gray-700;
  @apply transition-colors duration-200;
  @apply focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2;
  @apply dark:focus:ring-offset-gray-800;
}

/* åœ–æ¨™åˆ‡æ›å‹•ç•« */
.theme-icon-enter-active,
.theme-icon-leave-active {
  transition: all 0.2s ease;
}

.theme-icon-enter-from {
  opacity: 0;
  transform: rotate(-90deg) scale(0.8);
}

.theme-icon-leave-to {
  opacity: 0;
  transform: rotate(90deg) scale(0.8);
}
</style>
```

---

## ğŸ¯ ä¸»é¡Œé©é…æœ€ä½³å¯¦è¸

### æ¢ä»¶æ¨£å¼æ‡‰ç”¨
```scss
// ä½¿ç”¨ CSS è‡ªè¨‚å±¬æ€§è€Œä¸æ˜¯ç¡¬ç·¨ç¢¼é¡è‰²
.card {
  background-color: var(--surface-primary);
  border: 1px solid var(--border-primary);
  color: var(--text-primary);
  box-shadow: var(--shadow-md);
  
  // æ‡¸åœç‹€æ…‹
  &:hover {
    background-color: var(--surface-hover);
    box-shadow: var(--shadow-lg);
  }
}

// é¿å…é€™æ¨£å¯«
.card-bad {
  background-color: #ffffff; /* åªé©ç”¨æ–¼æ·ºè‰²æ¨¡å¼ */
  color: #000000; /* æ·±è‰²æ¨¡å¼ä¸‹ä¸å¯è®€ */
}
```

### åœ–ç‰‡å’Œåœ–æ¨™é©é…
```vue
<template>
  <!-- SVG åœ–æ¨™ä½¿ç”¨ currentColor -->
  <svg class="icon" fill="currentColor">
    <path d="..." />
  </svg>
  
  <!-- ä¸åŒä¸»é¡Œä½¿ç”¨ä¸åŒåœ–ç‰‡ -->
  <img
    :src="currentTheme === 'dark' ? '/logo-dark.svg' : '/logo-light.svg'"
    alt="BandPro Logo"
    class="logo"
  />
  
  <!-- CSS èƒŒæ™¯åœ–ç‰‡é©é… -->
  <div class="hero-section">
    <!-- å…§å®¹ -->
  </div>
</template>

<style scoped>
.icon {
  @apply text-gray-600 dark:text-gray-300;
}

.hero-section {
  background-image: url('/hero-light.jpg');
}

[data-theme="dark"] .hero-section {
  background-image: url('/hero-dark.jpg');
}
</style>
```

### éŸ³æ¨‚ç¬¦è™Ÿé©é…
```css
/* éŸ³æ¨‚ç¬¦è™Ÿåœ¨ä¸åŒä¸»é¡Œä¸‹çš„é¡¯ç¤º */
.music-note {
  fill: var(--music-note-default);
  stroke: var(--music-note-default);
  stroke-width: 0.5;
  
  &.selected {
    fill: var(--music-note-selected);
    stroke: var(--music-note-selected);
  }
  
  &.playing {
    fill: var(--music-note-playing);
    stroke: var(--music-note-playing);
    animation: note-pulse 1s ease-in-out infinite;
  }
}

/* äº”ç·šè­œåœ¨ä¸åŒä¸»é¡Œä¸‹çš„é©é… */
.staff-line {
  stroke: var(--music-staff-lines);
  stroke-width: 1;
  fill: none;
}

.measure-line {
  stroke: var(--music-measure-lines);
  stroke-width: 1.5;
  fill: none;
}
```

---

## ğŸ§ª ä¸»é¡Œæ¸¬è©¦ç­–ç•¥

### è¦–è¦ºå›æ­¸æ¸¬è©¦
```typescript
// tests/visual/theme.spec.ts
import { test, expect } from '@playwright/test'

test.describe('Theme System', () => {
  test('should render correctly in light mode', async ({ page }) => {
    await page.goto('/')
    await page.evaluate(() => {
      document.documentElement.setAttribute('data-theme', 'light')
    })
    
    await expect(page).toHaveScreenshot('light-theme-homepage.png')
  })
  
  test('should render correctly in dark mode', async ({ page }) => {
    await page.goto('/')
    await page.evaluate(() => {
      document.documentElement.setAttribute('data-theme', 'dark')
    })
    
    await expect(page).toHaveScreenshot('dark-theme-homepage.png')
  })
  
  test('should smoothly transition between themes', async ({ page }) => {
    await page.goto('/')
    
    // é»æ“Šä¸»é¡Œåˆ‡æ›æŒ‰éˆ•
    await page.click('[aria-label*="åˆ‡æ›"]')
    
    // ç­‰å¾…éæ¸¡å‹•ç•«å®Œæˆ
    await page.waitForTimeout(300)
    
    await expect(page).toHaveScreenshot('theme-transition.png')
  })
})
```

### è‰²å½©å°æ¯”åº¦æ¸¬è©¦
```typescript
// tests/accessibility/contrast.spec.ts
import { test, expect } from '@playwright/test'
import { checkContrast } from '@playwright/test/accessibility'

test('should meet WCAG contrast requirements', async ({ page }) => {
  await page.goto('/')
  
  // æ¸¬è©¦æ·ºè‰²æ¨¡å¼å°æ¯”åº¦
  await page.evaluate(() => {
    document.documentElement.setAttribute('data-theme', 'light')
  })
  
  const lightContrast = await checkContrast(page, {
    textColor: '#0F172A', // --text-primary
    backgroundColor: '#FFFFFF' // --bg-primary
  })
  
  expect(lightContrast.ratio).toBeGreaterThan(4.5) // WCAG AA æ¨™æº–
  
  // æ¸¬è©¦æ·±è‰²æ¨¡å¼å°æ¯”åº¦
  await page.evaluate(() => {
    document.documentElement.setAttribute('data-theme', 'dark')
  })
  
  const darkContrast = await checkContrast(page, {
    textColor: '#F8FAFC', // --text-primary
    backgroundColor: '#0F172A' // --bg-primary
  })
  
  expect(darkContrast.ratio).toBeGreaterThan(4.5)
})
```

---

## ğŸ“± éŸ¿æ‡‰å¼ä¸»é¡Œè€ƒé‡

### ç§»å‹•è£ç½®ä¸»é¡Œå„ªåŒ–
```css
/* ç§»å‹•è£ç½®ä¸Šçš„ä¸»é¡Œå„ªåŒ– */
@media (max-width: 768px) {
  [data-theme="light"] {
    /* æ·ºè‰²æ¨¡å¼ä¸‹ç¨å¾®é™ä½å°æ¯”åº¦ï¼Œæ¸›å°‘çœ¼ç›ç–²å‹ */
    --bg-primary: #FAFAFA;
    --text-primary: #1A1A1A;
  }
  
  [data-theme="dark"] {
    /* æ·±è‰²æ¨¡å¼ä¸‹ä½¿ç”¨çœŸæ­£çš„é»‘è‰²èƒŒæ™¯ï¼Œç¯€çœé›»æ±  */
    --bg-primary: #000000;
    --bg-secondary: #111111;
  }
}

/* é«˜äº®åº¦ç’°å¢ƒä¸‹çš„èª¿æ•´ */
@media (prefers-contrast: high) {
  :root {
    --border-primary: #000000;
    --text-secondary: #000000;
  }
  
  [data-theme="dark"] {
    --border-primary: #FFFFFF;
    --text-secondary: #FFFFFF;
  }
}

/* æ¸›å°‘å‹•ç•«åå¥½ */
@media (prefers-reduced-motion: reduce) {
  .theme-toggle,
  .theme-icon-enter-active,
  .theme-icon-leave-active {
    transition: none !important;
    animation: none !important;
  }
}
```

---

## ğŸ¯ å¯¦æ–½æª¢æŸ¥æ¸…å–®

### é–‹ç™¼éšæ®µ
- [ ] è¨­ç½® CSS è‡ªè¨‚å±¬æ€§ç³»çµ±
- [ ] å¯¦ç¾ä¸»é¡Œåˆ‡æ›é‚è¼¯
- [ ] å‰µå»ºä¸»é¡Œåˆ‡æ›çµ„ä»¶
- [ ] é©é…æ‰€æœ‰ UI çµ„ä»¶
- [ ] æ¸¬è©¦éŸ³æ¨‚ç¬¦è™Ÿé¡¯ç¤º

### æ¸¬è©¦éšæ®µ
- [ ] è‰²å½©å°æ¯”åº¦æ¸¬è©¦ï¼ˆWCAG AAï¼‰
- [ ] è¦–è¦ºå›æ­¸æ¸¬è©¦
- [ ] è·¨ç€è¦½å™¨ä¸»é¡Œæ¸¬è©¦
- [ ] ç§»å‹•è£ç½®ä¸»é¡Œæ¸¬è©¦
- [ ] ç„¡éšœç¤™åŠŸèƒ½æ¸¬è©¦

### ç™¼å¸ƒæº–å‚™
- [ ] æ€§èƒ½å½±éŸ¿è©•ä¼°
- [ ] ç”¨æˆ¶åå¥½è¨˜æ†¶åŠŸèƒ½
- [ ] ç³»çµ±ä¸»é¡Œè·Ÿéš¨åŠŸèƒ½
- [ ] å¹³æ»‘éæ¸¡å‹•ç•«
- [ ] æ–‡æª”æ›´æ–°

ğŸ‘‰ **ä¸‹ä¸€æ­¥ï¼šåƒè€ƒ [03_éŸ¿æ‡‰å¼ä½ˆå±€è¨­è¨ˆ.md](./03_éŸ¿æ‡‰å¼ä½ˆå±€è¨­è¨ˆ.md) äº†è§£è·¨è£ç½®é©é…ç­–ç•¥**
